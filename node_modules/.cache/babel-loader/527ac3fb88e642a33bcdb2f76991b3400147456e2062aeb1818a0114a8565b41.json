{"ast":null,"code":"var _jsxFileName = \"/home/codex/Desktop/newProject/buybusy/src/context/authContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// imports\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport db, { auth } from \"../firebaseInit\";\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n// custom hook for the context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst authContext = /*#__PURE__*/createContext();\nfunction useAuthContext() {\n  _s();\n  const value = useContext(authContext);\n  return value;\n}\n\n// custom context\n_s(useAuthContext, \"ksutO2/Ix3UeCrGnhyM+QEP505Y=\");\nfunction AuthContext({\n  children\n}) {\n  _s2();\n  // state for loading while authentication and for user details\n  const [userDetails, setUserDetails] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [refresh, setRefresh] = useState(false);\n\n  // useEffect to get the logged in user\n  useEffect(() => {\n    setLoading(true);\n    // firebase function to moniter status of any login/signup attempt\n    const unsubscriber = onAuthStateChanged(auth, async currentUser => {\n      if (currentUser) {\n        let docSnap = await getDoc(doc(db, \"users\", currentUser.email));\n        let user = docSnap.data();\n        setUserDetails(user);\n      }\n    });\n    setLoading(false);\n    return unsubscriber;\n  }, []);\n\n  // sign up new user\n  function signUp(data) {\n    setLoading(true);\n    // firebase function to create new user with email and password\n    createUserWithEmailAndPassword(auth, data.email, data.pswrd).then(async res => {\n      console.log(\"Signed Up Successfully!\");\n      await updateProfile(res.user, {\n        displayName: data.name\n      });\n      const currentUser = {\n        name: data.name,\n        email: data.email,\n        pswrd: data.pswrd,\n        cart: {\n          count: 0,\n          cost: 0,\n          items: []\n        },\n        orders: []\n      };\n      await setDoc(doc(db, 'users', currentUser.email), currentUser);\n      setUserDetails(currentUser);\n      toast.success(\"Signed Up Successfully! ðŸ¥³\");\n      setLoading(false);\n    }).catch(error => {\n      toast.error(error.message);\n      setLoading(false);\n    });\n  }\n\n  // login existing user\n  function logIn(data) {\n    setLoading(true);\n    // firebase function to login a user with email and password\n    signInWithEmailAndPassword(auth, data.email, data.pswrd).then(async res => {\n      console.log('signed in successfully');\n      const currentUser = {\n        name: res.user.displayName,\n        email: res.user.email,\n        pswrd: data.pswrd,\n        cart: {\n          count: 0,\n          cost: 0,\n          items: []\n        },\n        orders: []\n      };\n      setUserDetails(currentUser);\n      toast.success(\"Signed In Successfully ðŸ¥³\");\n      setLoading(false);\n    }).catch(error => {\n      toast.error(error.message);\n      setLoading(false);\n    });\n  }\n\n  // log out current user\n  function logOut() {\n    // firebase function to end the session of current user \n    signOut(auth).then(() => {\n      console.log(\"signed out successfully ! \");\n      toast.success(\"Logged Out Successfully! ðŸ™\");\n      setUserDetails(null);\n      setRefresh(!refresh);\n    }).catch(err => {\n      toast.error(err.message);\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(authContext.Provider, {\n    value: {\n      user: userDetails,\n      signUp,\n      logIn,\n      logOut,\n      loading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 9\n  }, this);\n}\n_s2(AuthContext, \"HoAfjVK69S+huPzgHoMMcumKpvs=\");\n_c = AuthContext;\nexport default AuthContext;\nexport { useAuthContext };\nvar _c;\n$RefreshReg$(_c, \"AuthContext\");","map":{"version":3,"names":["createContext","useContext","useEffect","useState","db","auth","createUserWithEmailAndPassword","signInWithEmailAndPassword","updateProfile","signOut","onAuthStateChanged","doc","setDoc","getDoc","toast","jsxDEV","_jsxDEV","authContext","useAuthContext","_s","value","AuthContext","children","_s2","userDetails","setUserDetails","loading","setLoading","refresh","setRefresh","unsubscriber","currentUser","docSnap","email","user","data","signUp","pswrd","then","res","console","log","displayName","name","cart","count","cost","items","orders","success","catch","error","message","logIn","logOut","err","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/codex/Desktop/newProject/buybusy/src/context/authContext.js"],"sourcesContent":["// imports\nimport { createContext, useContext, useEffect, useState } from \"react\";\n\nimport db, { auth } from \"../firebaseInit\"\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile, signOut, onAuthStateChanged } from \"firebase/auth\"\nimport { doc, setDoc, getDoc } from \"firebase/firestore\";\n\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\n// custom hook for the context\nconst authContext = createContext();\n\nfunction useAuthContext() {\n    const value = useContext(authContext);\n    return value;\n}\n\n// custom context\nfunction AuthContext({ children }) {\n    // state for loading while authentication and for user details\n    const [userDetails, setUserDetails] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [refresh, setRefresh] = useState(false);\n\n    // useEffect to get the logged in user\n    useEffect(() => {\n        setLoading(true);\n        // firebase function to moniter status of any login/signup attempt\n        const unsubscriber = onAuthStateChanged(auth, async (currentUser) => {\n            if (currentUser) {\n                let docSnap = await getDoc(doc(db, \"users\", currentUser.email));\n                let user = docSnap.data();\n                setUserDetails(user);\n            }\n        });\n        setLoading(false);\n        return unsubscriber;\n    }, []);\n\n    // sign up new user\n    function signUp(data) {\n        setLoading(true);\n        // firebase function to create new user with email and password\n        createUserWithEmailAndPassword(auth, data.email, data.pswrd)\n            .then(async (res) => {\n                console.log(\"Signed Up Successfully!\");\n                await updateProfile(res.user, {\n                    displayName: data.name\n                });\n                const currentUser = {\n                    name: data.name,\n                    email: data.email,\n                    pswrd: data.pswrd,\n                    cart: {\n                        count: 0,\n                        cost: 0,\n                        items: []\n                    },\n                    orders: []\n                }\n                await setDoc(doc(db, 'users', currentUser.email), currentUser);\n                setUserDetails(currentUser);\n                toast.success(\"Signed Up Successfully! ðŸ¥³\");\n                setLoading(false);\n            }).catch((error) => {\n                toast.error(error.message);\n                setLoading(false);\n            });\n    }\n\n    // login existing user\n    function logIn(data) {\n        setLoading(true);\n        // firebase function to login a user with email and password\n        signInWithEmailAndPassword(auth, data.email, data.pswrd)\n            .then(async (res) => {\n                console.log('signed in successfully');\n                const currentUser = {\n                    name: res.user.displayName,\n                    email: res.user.email,\n                    pswrd: data.pswrd,\n                    cart: {\n                        count: 0,\n                        cost: 0,\n                        items: []\n                    },\n                    orders: []\n                }\n                setUserDetails(currentUser);\n                toast.success(\"Signed In Successfully ðŸ¥³\");\n                setLoading(false);\n            }).catch((error) => {\n                toast.error(error.message);\n                setLoading(false);\n            });\n    }\n\n    // log out current user\n    function logOut() {\n        // firebase function to end the session of current user \n        signOut(auth)\n            .then(() => {\n                console.log(\"signed out successfully ! \");\n                toast.success(\"Logged Out Successfully! ðŸ™\");\n                setUserDetails(null);\n                setRefresh(!refresh);\n            }).catch((err) => {\n                toast.error(err.message);\n            });\n    }\n\n    return (\n        <authContext.Provider value={{ user: userDetails, signUp, logIn, logOut, loading }}>\n            {children}\n        </authContext.Provider>\n    )\n}\n\nexport default AuthContext;\nexport { useAuthContext };"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}